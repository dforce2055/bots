{
  "version": 3,
  "sources": ["../../../src/utils/utils.ts"],
  "sourcesContent": ["/* eslint-disable no-console */\nimport axios from 'axios'\nconst { writeJson, readJson } = require('fs-extra')\nimport { TelegramChat, WhatsAppChat } from '../models'\n\nimport {\n  BotInfo,\n  CHAT_TYPE,\n  iTelegramChat,\n  iWhatsAppChat,\n} from '../@types'\n\nexport const getDolarBluePrice = async () => {\n  try {\n    const { JWT_DOLAR_BLUE } = process.env\n    const config = {\n      method: 'get',\n      url: 'https://www.safetime.com.ar/api/dolar/currentprice',\n      headers: { \n        'Authorization': `Bearer ${JWT_DOLAR_BLUE}`\n      }\n    }\n    const response = await axios(config)\n    const { data } = response\n    const { price } = data\n    return price\n  } catch (error) {\n    console.log(error)\n    return 0\n  }\n}\n\nexport const appendNewChat = async (\n  { path, chat, filename }:\n  { path?: string, chat: string, filename: string }\n) => {\n  try {\n    path = path || `./public/data/${ filename }.json`\n    const dataReaded = await readJson(path)\n    const data = [...dataReaded, chat]\n\n    await writeJson(path, data)\n    console.log('Data written successfully!')\n  } catch (error) {\n    console.log(error)\n  }\n}\nexport const saveChat = async (\n  { chat, type, botInfo }:\n    {\n      chat: iTelegramChat | iWhatsAppChat,\n      type: CHAT_TYPE,\n      botInfo?: BotInfo\n    }): Promise<boolean> => {\n  try {\n\n    if(type === CHAT_TYPE.TELEGRAM)\n      await TelegramChat.create({\n        bot_info: botInfo,\n        ...chat\n      })\n\n    if (type === CHAT_TYPE.WHATSAPP) {\n      // remove _data from chat object\n      const { _data, ...newChat} = chat as iWhatsAppChat\n      await WhatsAppChat.create({ \n        bot_info: botInfo,\n        ...chat\n      })\n    }\n    \n    console.log('Data save successfully!')\n    return true\n  } catch (error) {\n    console.log(error)\n    return false\n  }\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAAkB;AAElB,oBAA2C;AAE3C,mBAKO;AARP,MAAM,EAAE,WAAW,SAAS,IAAI,QAAQ,UAAU;AAU3C,MAAM,oBAAoB,YAAY;AAC3C,MAAI;AACF,UAAM,EAAE,eAAe,IAAI,QAAQ;AACnC,UAAM,SAAS;AAAA,MACb,QAAQ;AAAA,MACR,KAAK;AAAA,MACL,SAAS;AAAA,QACP,iBAAiB,UAAU;AAAA,MAC7B;AAAA,IACF;AACA,UAAM,WAAW,UAAM,aAAAA,SAAM,MAAM;AACnC,UAAM,EAAE,KAAK,IAAI;AACjB,UAAM,EAAE,MAAM,IAAI;AAClB,WAAO;AAAA,EACT,SAAS,OAAP;AACA,YAAQ,IAAI,KAAK;AACjB,WAAO;AAAA,EACT;AACF;AAEO,MAAM,gBAAgB,OAC3B,EAAE,MAAM,MAAM,SAAS,MAEpB;AACH,MAAI;AACF,WAAO,QAAQ,iBAAkB;AACjC,UAAM,aAAa,MAAM,SAAS,IAAI;AACtC,UAAM,OAAO,CAAC,GAAG,YAAY,IAAI;AAEjC,UAAM,UAAU,MAAM,IAAI;AAC1B,YAAQ,IAAI,4BAA4B;AAAA,EAC1C,SAAS,OAAP;AACA,YAAQ,IAAI,KAAK;AAAA,EACnB;AACF;AACO,MAAM,WAAW,OACtB,EAAE,MAAM,MAAM,QAAQ,MAKI;AAC1B,MAAI;AAEF,QAAG,SAAS,uBAAU;AACpB,YAAM,2BAAa,OAAO;AAAA,QACxB,UAAU;AAAA,QACV,GAAG;AAAA,MACL,CAAC;AAEH,QAAI,SAAS,uBAAU,UAAU;AAE/B,YAAM,EAAE,UAAU,QAAO,IAAI;AAC7B,YAAM,2BAAa,OAAO;AAAA,QACxB,UAAU;AAAA,QACV,GAAG;AAAA,MACL,CAAC;AAAA,IACH;AAEA,YAAQ,IAAI,yBAAyB;AACrC,WAAO;AAAA,EACT,SAAS,OAAP;AACA,YAAQ,IAAI,KAAK;AACjB,WAAO;AAAA,EACT;AACF;",
  "names": ["axios"]
}
